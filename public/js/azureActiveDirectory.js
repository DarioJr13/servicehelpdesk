webpackJsonp([11],{3850:function(t,e,a){t.exports=a(3851)},3851:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(33),i=(a.n(n),a(11)),r=a(24);new Vue({el:"#azure-active-directory-settings",store:i.a,components:{"azure-active-directory-settings":a(3852),"azure-active-directory-index":a(3857)}});r.injectComponentIntoView("azure-login",a(3862),"login-box-mounted","login-box")},3852:function(t,e,a){var n=a(0)(a(3855),a(3856),!1,function(t){a(3853)},"data-v-7065d7d0",null);t.exports=n.exports},3853:function(t,e,a){var n=a(3854);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("13ea5d25",n,!0,{})},3854:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,"",""])},3855:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(17),i=a.n(n),r=a(11),o=a(16),s=a(4);var l=a(3),d=a.n(l),u=a(6);e.default={name:"AzureActiveDirectorySettings",data:function(){return{app_name:"",app_id:"",app_secret:"",tenant_id:"",login_button_label:"",hasDataPopulated:!0,loading:!1,azureAdId:null}},beforeMount:function(){var t=Object(s.o)(window.location.pathname);this.azureAdId=t||"",this.azureAdId&&this.getConfiguration()},methods:{onChange:function(t,e){this[e]=t},isValid:function(){return function(t){var e={appName:[t.appName,"isRequired"],appId:[t.appId,"isRequired"],appSecret:[t.appSecret,"isRequired"],tenantId:[t.tenantId,"isRequired"]},a=new o.Validator(s.s).validate(e),n=a.errors,i=a.isValid;return r.a.dispatch("setValidationError",n),{errors:n,isValid:i}}(this.$data).isValid},saveConfiguration:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValid()&&(this.loading=!0,d.a.post("api/azure-active-directory/settings",{id:this.azureAdId,app_name:this.app_name,tenant_id:this.tenant_id,app_id:this.app_id,app_secret:this.app_secret,login_button_label:this.login_button_label,import:e}).then(function(e){t.loading=!1,t.hasDataPopulated=!0,Object(u.b)(e,"AzureActiveDirectorySettings"),t.azureAdId&&t.redirect("/azure-active-directory/settings"),t.azureAdId=e.data.data.azure_ad_id,t.getConfiguration()}).catch(function(e){console.log(e),t.loading=!1,Object(u.a)(e,"AzureActiveDirectorySettings")}).finally(function(){t.loading=!1}))},getConfiguration:function(){var t=this;this.loading=!0,d.a.get("api/azure-active-directory/settings/"+this.azureAdId).then(function(e){t.app_name=e.data.data.app_name,t.tenant_id=e.data.data.tenant_id,t.app_id=e.data.data.app_id,t.app_secret=e.data.data.app_secret,t.login_button_label=e.data.data.login_button_label}).catch(function(t){Object(u.a)(t,"AzureActiveDirectorySettings")}).finally(function(){t.loading=!1})}},components:{"static-select":a(25),"text-field":a(12),alert:a(5),"custom-loader":a(9),checkbox:a(40),"faveo-box":i.a}}},3856:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[!1===t.hasDataPopulated||!0===t.loading?a("div",{staticClass:"row"},[a("custom-loader")],1):t._e(),t._v(" "),a("alert",{attrs:{componentName:"AzureActiveDirectorySettings"}}),t._v(" "),t.hasDataPopulated?a("div",[a("faveo-box",{attrs:{title:t.lang("configuration_settings")}},[a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.trans("app_name"),value:t.app_name,type:"text",name:"app_name",onChange:t.onChange,classname:"col-md-6",required:!0,id:"app-name"}}),t._v(" "),a("text-field",{attrs:{label:t.lang("tenant_id"),value:t.tenant_id,type:"text",name:"tenant_id",onChange:t.onChange,classname:"col-sm-6",required:!0,id:"tenant-id"}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.trans("app_id"),value:t.app_id,type:"text",name:"app_id",onChange:t.onChange,classname:"col-sm-6",required:!0,id:"app-id"}}),t._v(" "),a("text-field",{attrs:{label:t.trans("app_secret"),value:t.app_secret,type:"password",name:"app_secret",onChange:t.onChange,classname:"col-sm-6",required:!0,id:"app-secret"}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.trans("login_button_label"),value:t.login_button_label,type:"text",name:"login_button_label",onChange:t.onChange,classname:"col-sm-6",id:"login-button-label"}}),t._v(" "),a("text-field",{attrs:{label:t.trans("azure_redirect_uri"),hint:t.trans("azure_redirect_uri_hint"),value:t.basePath()+"/azure-active-directory/auth-token/callback",type:"text",name:"login_button_label",onChange:t.onChange,classname:"col-sm-6",disabled:"true"}})],1),t._v(" "),a("div",{staticClass:"card-footer",attrs:{slot:"actions"},slot:"actions"},[a("button",{staticClass:"btn btn-primary",attrs:{id:"azure-settings-save",disabled:t.loading},on:{click:function(){return t.saveConfiguration(!1)}}},[a("span",{staticClass:"fas fa-save"}),t._v(" \n                    "+t._s(t.lang("save"))+"\n                ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{id:"azure-settings-submit",disabled:t.loading},on:{click:function(){return t.saveConfiguration(!0)}}},[a("span",{staticClass:"fas fa-save"}),t._v(" \n                    "+t._s(t.lang("save_and_import"))+"\n                ")])])])],1):t._e()],1)},staticRenderFns:[]}},3857:function(t,e,a){var n=a(0)(a(3860),a(3861),!1,function(t){a(3858)},"data-v-130b288f",null);t.exports=n.exports},3858:function(t,e,a){var n=a(3859);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("97245794",n,!0,{})},3859:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".right[data-v-130b288f]{float:right}.hide-checkbox[data-v-130b288f]{height:25px}",""])},3860:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(7),i=a(3),r=a.n(i),o=a(6),s=a(17),l=a.n(s),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};e.default={name:"AzureActiveDirectoryIndex",data:function(){var t=this;return{hideDefaultLogin:!1,columns:["app_name","app_id","created_at","updated_at","action"],options:{texts:{filter:"",limit:""},headings:{app_name:"App Name",app_id:"App Id",created_at:"Created At",updated_at:"Updated At",action:"Action"},templates:{action:"data-table-actions",created_at:function(e,a){return t.formattedTime(a.created_at)},updated_at:function(e,a){return t.formattedTime(a.updated_at)}},sortable:["app_name","app_id","created_at","updated_at"],filterable:["app_name","app_id","created_at","updated_at"],pagination:{chunk:5,nav:"fixed",edge:!0},requestAdapter:function(t){return{sort_field:t.orderBy?t.orderBy:"id",sort_order:t.ascending?"desc":"asc",search_query:t.query.trim(),page:t.page,limit:t.limit}},responseAdapter:function(e){var a=this,n=e.data;return t.hideDefaultLogin=n.data.hide_default_login,{data:n.data.directories.data.map(function(t){return t.edit_url=a.basePath()+"/azure-active-directory/"+t.id+"/edit",t.delete_url=a.basePath()+"/api/azure-active-directory/settings/"+t.id,t}),count:n.data.directories.total}}},apiUrl:"api/azure-active-directory/settings"}},methods:{updateHideDefaultLogin:function(){var t=this;this.isLoading=!0;var e={hide_default_login:this.hideDefaultLogin};r.a.post("api/azure-active-directory/hide-default-login",e).then(function(t){Object(o.b)(t,"azure-list-page")}).catch(function(t){Object(o.a)(t,"azure-list-page")}).finally(function(){t.isLoading=!1})}},computed:d({},Object(n.b)(["formattedTime"])),components:{"data-table":a(14),alert:a(5),"faveo-box":l.a}}},3861:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("alert",{attrs:{componentName:"dataTableModal"}}),t._v(" "),a("faveo-box",{attrs:{title:t.trans("list_of_azure_active_directories")}},[a("alert",{attrs:{componentName:"azure-list-page"}}),t._v(" "),t.isLoading?a("loader",{attrs:{duration:4e3}}):t._e(),t._v(" "),a("div",{staticClass:"card-tools d-flex mt-1",attrs:{slot:"headerMenu"},slot:"headerMenu"},[a("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("create_new_directory"),expression:"trans('create_new_directory')"}],staticClass:"btn btn-tool",attrs:{href:t.basePath()+"/azure-active-directory/create"}},[a("i",{staticClass:"fas fa-plus",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("hide_default_login"),expression:"trans('hide_default_login')"}],staticClass:"btn-tool"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.hideDefaultLogin,expression:"hideDefaultLogin"}],staticClass:"hide-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.hideDefaultLogin)?t._i(t.hideDefaultLogin,null)>-1:t.hideDefaultLogin},on:{change:[function(e){var a=t.hideDefaultLogin,n=e.target,i=!!n.checked;if(Array.isArray(a)){var r=t._i(a,null);n.checked?r<0&&(t.hideDefaultLogin=a.concat([null])):r>-1&&(t.hideDefaultLogin=a.slice(0,r).concat(a.slice(r+1)))}else t.hideDefaultLogin=i},function(e){t.updateHideDefaultLogin()}]}})])]),t._v(" "),a("data-table",{attrs:{url:t.apiUrl,dataColumns:t.columns,option:t.options}})],1)],1)},staticRenderFns:[]}},3862:function(t,e,a){var n=a(0)(a(3865),a(3866),!1,function(t){a(3863)},null,null);t.exports=n.exports},3863:function(t,e,a){var n=a(3864);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("5bc62678",n,!0,{})},3864:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".azure-login-button{margin-top:5px;margin-bottom:3px}.azure-login-block{text-align:left;margin-bottom:10px}",""])},3865:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(7),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};e.default={props:["data"],data:function(){return{azureSettings:null}},beforeMount:function(){this.azureSettings=JSON.parse(this.data).azure_meta_settings,this.azureSettings.hide_default_login&&this.hideDefaultLogin()},methods:{azureLoginSubmit:function(t){window.location=t},hideDefaultLogin:function(){document.getElementById("user_name").style.display="none",document.getElementById("password").style.display="none",document.getElementById("remember_me").style.display="none",document.getElementById("default-login-button").style.display="none",document.getElementById("default-forgot-password").style.display="none"}},computed:i({},Object(n.b)({buttonStyle:"getButtonStyle",linkStyle:"getLinkStyle"}))}},3866:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.azureSettings?a("div",{attrs:{id:"azure-login"}},[t.azureSettings.hide_default_login?a("img",{staticStyle:{margin:"-60px 0 -10px 92px"},attrs:{src:t.basePath()+"/images/azure.png",alt:t.trans("azure_active_directory"),width:"256",height:"256"}}):t._e(),t._v(" "),t._l(t.azureSettings.directory_settings,function(e,n){return a("span",{staticClass:"azure-login-block"},[a("button",{staticClass:"azure-login-button btn btn-custom btn-block btn-flat",style:t.buttonStyle,attrs:{id:"azure-login-button-"+n},on:{click:function(){return t.azureLoginSubmit(e.login_url)}}},[a("i",{staticClass:"fa fa-server",attrs:{"aria-hidden":"true"}}),t._v("\n        "+t._s(""!==e.login_button_label?e.login_button_label:t.lang("login_via_azure"))+"\n    ")])])})],2):t._e()},staticRenderFns:[]}}},[3850]);