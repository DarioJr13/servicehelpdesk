webpackJsonp([8],{2712:function(t,e,a){t.exports=a(2713)},2713:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(33),o=(a.n(n),a(11));a(24),new Vue({el:"#facebook-settings",store:o.a,components:{"facebook-settings":a(2714),"facebook-create-edit":a(2722),"facebook-general-settings":a(2727)}})},2714:function(t,e,a){var n=a(0)(a(2717),a(2721),!1,function(t){a(2715)},"data-v-77cf6372",null);t.exports=n.exports},2715:function(t,e,a){var n=a(2716);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("c8412262",n,!0,{})},2716:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".mr-2[data-v-77cf6372]{margin-right:5px}.page-id[data-v-77cf6372],.page-name[data-v-77cf6372]{width:30%!important;word-break:break-all}.page-action[data-v-77cf6372],.page-active[data-v-77cf6372]{width:20%!important;word-break:break-all}",""])},2717:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(7),o=(a(6),a(19)),i=(a.n(o),a(3)),s=(a.n(i),a(15)),r=a.n(s),c=a(17),l=a.n(c),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};r.a.component("switch-action",a(2718)),r.a.component("table-actions-actual",a(21)),e.default={name:"FacebookSettings",description:"Component listing all facebook pages",computed:d({},Object(n.b)(["formattedTime","formattedDate"])),data:function(){return{apiUrl:"facebook/api/integration",loading:!1,columns:["page_name","page_id","status","action"],options:{},dataTableVisible:!0,duration:4e3}},methods:{addPage:function(){this.redirect("/facebook/integration/create")},gotoSecurity:function(){this.redirect("/facebook/security-settings")}},beforeMount:function(){var t=this;this.options={headings:{page_name:"Name",page_id:"Page ID",status:"Status",action:"Actions"},columnsClasses:{page_name:"page-name",page_id:"page-id",status:"page-active",action:"page-action"},sortIcon:{base:"glyphicon",up:"glyphicon-chevron-up",down:"glyphicon-chevron-down"},texts:{filter:"",limit:""},templates:{status:"switch-action",action:"table-actions-actual"},requestAdapter:function(t){return{"sort-field":t.orderBy?t.orderBy:"id","sort-order":t.ascending?"desc":"asc","search-query":t.query.trim(),page:t.page,limit:t.limit}},responseAdapter:function(e){var a=e.data;return{data:a.data.pages.map(function(e){return e.delete_url=t.basePath()+"/facebook/api/integration/"+e.id,e.edit_url=t.basePath()+"/facebook/integration/edit/"+e.id,e}),count:a.data.total}},sortable:["page_name","page_id"],filterable:["page_name","page_id"],pagination:{chunk:5,nav:"fixed",edge:!0}}},components:{alert:a(5),"data-table":a(14),"faveo-box":l.a}}},2718:function(t,e,a){var n=a(0)(a(2719),a(2720),!1,null,null,null);t.exports=n.exports},2719:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(35),o=a.n(n),i=a(6);e.default={components:{"status-switch":o.a},props:["data"],methods:{onChange:function(t,e){this.statusChange(e)},statusChange:function(t){axios.get("facebook/api/integration/status/"+t).then(function(t){Object(i.b)(t,"dataTableModal"),window.eventHub.$emit("refreshData")}).catch(function(t){Object(i.a)(t,"dataTableModal")})}}}},2720:function(t,e){t.exports={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-group"},[e("status-switch",{key:Math.random(),attrs:{name:this.data.page_id,value:this.data.active,onChange:this.onChange}})],1)},staticRenderFns:[]}},2721:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loading?a("div",{staticClass:"row"},[a("custom-loader",{attrs:{duration:t.duration}})],1):t._e(),t._v(" "),a("alert",{attrs:{componentName:"dataTableModal"}}),t._v(" "),a("faveo-box",{attrs:{title:t.lang("facebook_pages_list")}},[a("div",{staticClass:"card-tools",attrs:{slot:"headerMenu"},slot:"headerMenu"},[a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.lang("facebook_add_page"),expression:"lang('facebook_add_page')"}],staticClass:"btn btn-tool",on:{click:t.addPage}},[a("i",{staticClass:"fas fa-plus"})]),t._v(" "),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.lang("facebook_go_to_security_settings"),expression:"lang('facebook_go_to_security_settings')"}],staticClass:"btn btn-tool",on:{click:function(e){return e.preventDefault(),t.gotoSecurity(e)}}},[a("i",{staticClass:"fas fa-shield-alt"})])]),t._v(" "),a("div",{attrs:{id:"page-view"}},[t.dataTableVisible?a("data-table",{attrs:{url:t.apiUrl,dataColumns:t.columns,option:t.options,scroll_to:"page-view"}}):t._e()],1)])],1)},staticRenderFns:[]}},2722:function(t,e,a){var n=a(0)(a(2725),a(2726),!1,function(t){a(2723)},"data-v-7c8030f1",null);t.exports=n.exports},2723:function(t,e,a){var n=a(2724);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("985c7c38",n,!0,{})},2724:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,"",""])},2725:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(17),o=a.n(n),i=a(3),s=a.n(i),r=a(6);e.default={name:"FacebookCreateEdit",components:{"text-field":a(12),alert:a(5),"custom-loader":a(9),"dynamic-select":a(13),modal:a(10),"faveo-box":o.a},props:{integrationData:{type:String,default:""}},data:function(){return{id:"",loadingSpeed:4e3,loading:!1,required:!0,page_access_token:"",page_name:"",page_id:"",elements_new_ticket:[{name:"One Day",value:"1"},{name:"Five Days",value:"5"},{name:"Ten Days",value:"10"},{name:"Fifteen Days",value:"15"},{name:"Thirty Days",value:"30"}]}},beforeMount:function(){this.fillFieldsIfEdit()},methods:{filterValues:function(t,e){return t.filter(function(t){if(t.value==e)return t})[0]},fillFieldsIfEdit:function(){if(this.integrationData){var t=JSON.parse(this.integrationData);this.id=t.id,this.page_access_token=t.page_access_token,this.page_id=t.page_id,this.page_name=t.page_name,this.new_ticket_interval=this.filterValues(this.elements_new_ticket,t.new_ticket_interval)}},onChange:function(t,e){this[e]=t},submit:function(){var t=this;this.loading=!0;var e={page_id:this.page_id,page_access_token:this.page_access_token,page_name:this.page_name,new_ticket_interval:this.new_ticket_interval?this.new_ticket_interval.value:null,verify_token:this.verify_token},a=void 0,n=void 0;this.id?(a="facebook/api/integration/"+this.id,n="PUT"):(a="facebook/api/integration",n="POST"),s.a.request({method:n,url:a,data:e}).then(function(e){t.loading=!1,Object(r.b)(e,"facebookCreateEdit"),t.loading=!1,t.$store.dispatch("unsetValidationError"),t.id||setTimeout(function(){t.redirect("/facebook/settings")},1200)}).catch(function(e){t.loading=!1,Object(r.a)(e,"facebookCreateEdit")})}}}},2726:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[!0===t.loading?a("div",{staticClass:"row"},[a("custom-loader",{attrs:{duration:t.loadingSpeed}})],1):t._e(),t._v(" "),a("alert",{attrs:{componentName:"facebookCreateEdit"}}),t._v(" "),a("faveo-box",{attrs:{title:t.id?t.lang("facebook_page_edit"):t.lang("facebook_page_create")}},[a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("facebook_page_name"),onChange:t.onChange,value:t.page_name,type:"text",name:"page_name",required:t.required,classname:"col-sm-6",hint:t.lang("facebook_page_name_hint"),id:"facebook_page_name"}}),t._v(" "),a("text-field",{attrs:{label:t.lang("facebook_page_id"),onChange:t.onChange,value:t.page_id,type:"text",name:"page_id",required:t.required,classname:"col-sm-6",hint:t.lang("facebook_page_id_hint"),id:"page_id"}})],1),t._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("facebook_page_access_token"),onChange:t.onChange,value:t.page_access_token,type:"password",name:"page_access_token",required:t.required,classname:"col-sm-6",hint:t.lang("facebook_page_access_token_hint"),id:"facebook_page_access_token"}}),t._v(" "),a("dynamic-select",{attrs:{name:"new_ticket_interval",classname:"col-sm-6",elements:t.elements_new_ticket,multiple:!1,prePopulate:!1,label:t.lang("facebook_new_ticket_interval"),value:t.new_ticket_interval,onChange:t.onChange,clearable:!1,searchable:!1,hint:t.lang("facebook_new_ticket_interval_hint"),required:t.required,placeholder:t.lang("facebook_new_ticket_interval_placeholder")}})],1),t._v(" "),a("div",{staticClass:"card-footer",attrs:{slot:"actions"},slot:"actions"},[a("button",{staticClass:"btn btn-primary",on:{click:t.submit}},[a("i",{staticClass:"fas fa-save"}),t._v("\n                "+t._s(t.lang("save"))+"\n            ")])])])],1)},staticRenderFns:[]}},2727:function(t,e,a){var n=a(0)(a(2730),a(2731),!1,function(t){a(2728)},null,null);t.exports=n.exports},2728:function(t,e,a){var n=a(2729);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(2)("11f21072",n,!0,{})},2729:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".mt-5{margin-top:5rem}.app-id{width:17%!important}.app-id,.app-secret{word-break:break-all}.app-secret{width:25%!important}.app-created{width:18%;word-break:break-all}.app-action{width:10%;word-break:break-all}.app-cron{width:10%!important;word-break:break-all}.app-new-ticket-interval{width:20%!important;word-break:break-all}.search{display:none!important}#H5{margin-left:16px}",""])},2730:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(3),o=a.n(n),i=a(6),s=a(17),r=a.n(s),c=a(7),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};e.default={computed:l({},Object(c.b)(["formattedTime","formattedDate"])),data:function(){return{fb_secret:"",hub_verify_token:"",appExists:!1,loadingSpeed:4e3,showModal:!1,loading:!1,settingsId:""}},components:{"text-field":a(12),alert:a(5),"custom-loader":a(9),"dynamic-select":a(13),modal:a(10),"faveo-box":r.a,"tool-tip":a(23)},beforeMount:function(){this.getAppDetails()},methods:{redirectToPages:function(){this.redirect("/facebook/pages/list")},onChange:function(t,e){this[e]=t},gotoPageSettingsPage:function(){this.redirect("/facebook/settings")},getAppDetails:function(){var t=this;this.loading=!0,o.a.get("facebook/api/security-settings/index").then(function(e){var a=e.data.data;a&&(t.appExists=!0,t.fb_secret=a.fb_secret,t.hub_verify_token=a.hub_verify_token,t.settingsId=a.id,t.loading=!1)}).catch(function(e){Object.assign(t.$data,t.$options.data.apply(t)),t.appExists=!1,t.loading=!1,t.hub_verify_token=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)})},deleteFacebook:function(){var t=this;this.isLoading=!0,this.isDisabled=!0,o.a.delete("facebook/api/security-settings/delete/"+this.settingsId).then(function(t){Object(i.b)(t,"facebookAppSettings")}).catch(function(t){Object(i.a)(t,"facebookAppSettings")}).finally(function(){t.isLoading=!1,t.showModal=!1,t.getAppDetails()})},toggleModal:function(){this.showModal=!this.showModal},onClose:function(){this.showModal=!1},submitter:function(){var t=this,e={fb_secret:this.fb_secret,hub_verify_token:this.hub_verify_token};this.loading=!0;var a=void 0,n=void 0;this.appExists?(a="facebook/api/security-settings/update/"+this.settingsId,n="PUT"):(a="facebook/api/security-settings/create",n="POST"),o.a.request({method:n,url:a,data:e}).then(function(e){Object(i.b)(e,"facebookAppSettings"),t.$store.dispatch("unsetValidationError")}).catch(function(t){Object(i.a)(t,"facebookAppSettings")}).finally(function(){t.loading=!1,t.getAppDetails()})}}}},2731:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[!0===t.loading?a("div",{staticClass:"row"},[a("custom-loader",{attrs:{duration:t.loadingSpeed}})],1):t._e(),t._v(" "),a("alert",{attrs:{componentName:"facebookAppSettings"}}),t._v(" "),a("faveo-box",{attrs:{title:t.lang("facebook_app_settings")}},[a("tool-tip",{attrs:{slot:"headerTooltip",message:t.lang("facebook_security_tooltip"),size:"large"},slot:"headerTooltip"}),t._v(" "),a("div",{staticClass:"card-tools",attrs:{slot:"headerMenu"},slot:"headerMenu"},[a("button",{staticClass:"btn btn-tool btn-default",on:{click:function(e){return e.preventDefault(),t.gotoPageSettingsPage(e)}}},[a("i",{staticClass:"fab fa-facebook-square"}),t._v("\n        "+t._s(t.lang("facebook_go_to_page_settings"))+"\n      ")])]),t._v(" "),a("div",[a("div",{staticClass:"row"},[a("text-field",{attrs:{label:t.lang("facebook_verify_token"),onChange:t.onChange,value:t.hub_verify_token,type:"text",name:"hub_verify_token",required:!0,classname:"col-sm-6",hint:t.lang("facebook_verify_token_hint"),id:"facebook_verify_token",disabled:!0}}),t._v(" "),a("text-field",{attrs:{label:t.lang("facebook_app_secret"),onChange:t.onChange,value:t.fb_secret,type:"password",name:"fb_secret",required:!0,classname:"col-sm-6",hint:t.lang("facebook_app_secret_hint"),id:"facebook_app_secret"}})],1)]),t._v(" "),a("div",{staticClass:"card-footer",attrs:{slot:"actions"},slot:"actions"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.submitter(e)}}},[a("i",{staticClass:"fas fa-save"}),t._v(" "+t._s(t.lang("facebook_save"))+"\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.appExists},on:{click:t.toggleModal}},[a("i",{staticClass:"glyphicon glyphicon-repeat"}),t._v(" \n        "+t._s(t.lang("facebook_reset"))+"\n      ")])])],1),t._v(" "),a("transition",{attrs:{name:"modal"}},[t.showModal?a("modal",{attrs:{showModal:!0,onClose:function(){return t.showModal=!1},containerStyle:"width: 500px"}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("h4",[t._v(t._s(t.lang("facebook_reset")))])]),t._v(" "),t.isLoading?t._e():a("div",{attrs:{slot:"fields"},slot:"fields"},[a("h5",{attrs:{id:"H5"}},[t._v("\n          "+t._s(t.lang("facebook_reset_confirm"))+"\n        ")])]),t._v(" "),t.isLoading?a("div",{staticClass:"row",attrs:{slot:"fields"},slot:"fields"},[a("loader",{class:{spin:"ar"===t.lang_locale},attrs:{"animation-duration":4e3,color:"#1d78ff",size:t.size}})],1):t._e(),t._v(" "),a("div",{attrs:{slot:"controls"},slot:"controls"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.deleteFacebook}},[a("i",{staticClass:"glyphicon glyphicon-repeat",attrs:{"aria-hidden":"true"}}),t._v("\n           "+t._s(t.lang("reset"))+"\n        ")])])]):t._e()],1)],1)},staticRenderFns:[]}}},[2712]);