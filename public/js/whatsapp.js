webpackJsonp([21],{2850:function(e,t,a){e.exports=a(2851)},2851:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(11);a(24);new Vue({el:"#whatsapp",store:n.a,components:{settings:a(2852)}})},2852:function(e,t,a){var n=a(0)(a(2855),a(2856),!1,function(e){a(2853)},null,null);e.exports=n.exports},2853:function(e,t,a){var n=a(2854);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(2)("638c729c",n,!0,{})},2854:function(e,t,a){(e.exports=a(1)(!1)).push([e.i,".search{display:none!important}#H5{margin-left:16px}.spin{left:0!important;right:43%!important}",""])},2855:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),s=a.n(n),i=a(6);t.default={mixins:[{data:function(){return{template:"",password:"password",name:"",sid:"",token:"",business_phone:"",webhook_url:"",app_exists:!1,required:!0,loading:!1,isLoading:!1,loadingSpeed:4e3,elements_new_ticket:[{name:"One Day",value:1},{name:"Five Days",value:5},{name:"Ten Days",value:10},{name:"Fifteen Days",value:15},{name:"Thirty Days",value:30}],showModal:!1,elements_is_image_inline:[{name:"Yes",value:1},{name:"No",value:0}],new_ticket_interval:{name:"One Day",value:"1"},is_image_inline:{name:"Yes",value:1}}},methods:{resetFields:function(){this.name="",this.sid="",this.token="",this.business_phone="",this.is_image_inline=1,this.new_ticket_interval="",this.template=""}}}],components:{"text-field":a(12),alert:a(5),"custom-loader":a(9),"dynamic-select":a(13),"data-table":a(14),modal:a(10),loader:a(8)},beforeMount:function(){this.getValuesForEdit(),this.webhook_url=this.basePath()+"/whatsapp"},methods:{onChange:function(e,t){this[t]=e},submit:function(){var e=this;this.loading=!0;var t={sid:this.sid,token:this.token,name:this.name,business_phone:this.business_phone,is_image_inline:this.is_image_inline.value,reply_interval:this.new_ticket_interval.value,template:this.template},a=void 0,n=void 0;this.app_exists?(a="whatsapp/api/update/",n="PUT"):(a="/whatsapp/api/create",n="POST"),s.a.request({method:n,url:a,data:t}).then(function(t){e.loading=!1,Object(i.b)(t,"dataTableModal"),setTimeout(function(){location.reload()},1200)}).catch(function(t){e.loading=!1,Object(i.a)(t,"dataTableModal")})},onSubmit:function(){var e=this;this.isLoading=!0,this.isDisabled=!0,s.a.delete("whatsapp/api/delete").then(function(t){Object(i.b)(t,"dataTableModal"),e.isLoading=!1,e.showModal=!1,e.redirect("/whatsapp/settings")}).catch(function(t){Object(i.a)(t,"dataTableModal"),e.showModal=!1,e.isLoading=!1})},getValuesForEdit:function(){var e=this;this.loading=!0,s.a.get("whatsapp/api/accounts").then(function(t){parseInt(t.data.data.total)>=1&&(e.app_exists=!0,e.data=t.data.data.accounts[0],e.sid=e.data.sid,e.token=e.data.token,e.name=e.data.name,e.is_image_inline=e.filterValues(e.elements_is_image_inline,e.data.is_image_inline),e.new_ticket_interval=e.filterValues(e.elements_new_ticket,e.data.new_ticket_interval),e.business_phone=e.data.business_phone,e.template=e.data.template),e.loading=!1}).catch(function(t){return e.loading=!1})},filterValues:function(e,t){return e.filter(function(e){if(e.value==t)return e})[0]},toggleModal:function(){this.showModal=!this.showModal},onClose:function(){this.showModal=!1}}}},2856:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.loading?a("custom-loader",{attrs:{duration:e.loadingSpeed}}):e._e(),e._v(" "),a("alert",{attrs:{componentName:"dataTableModal"}}),e._v(" "),a("div",{staticClass:"card card-light"},[a("div",{staticClass:"card-header"},[a("h3",{staticClass:"card-title"},[e._v("\n                "+e._s(e.lang("whatsapp_settings"))+"\n            ")])]),e._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("text-field",{attrs:{label:e.lang("name"),onChange:e.onChange,value:e.name,type:"text",name:"name",required:e.required,classname:"col-sm-6",hint:e.lang("name_hint"),id:"name"}}),e._v(" "),a("text-field",{attrs:{label:e.lang("account_sid"),onChange:e.onChange,value:e.sid,type:"text",name:"sid",required:e.required,classname:"col-sm-6",hint:e.lang("sid_hint"),id:"sid"}})],1),e._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:e.lang("auth_token"),onChange:e.onChange,value:e.token,type:"password",name:"token",required:e.required,classname:"col-sm-6",hint:e.lang("token_hint"),id:"token"}}),e._v(" "),a("text-field",{attrs:{label:e.lang("business_phone"),onChange:e.onChange,value:e.business_phone,type:"text",name:"business_phone",required:e.required,classname:"col-sm-6",hint:e.lang("business_phone_hint"),id:"business_phone"}})],1),e._v(" "),a("div",{staticClass:"row"},[a("text-field",{attrs:{label:e.lang("webhook_url"),onChange:e.onChange,value:e.webhook_url,type:"text",name:"webhook_url",required:e.required,classname:"col-sm-6",hint:e.lang("webhook_url_hint"),id:"webhook_url",disabled:!0}}),e._v(" "),a("dynamic-select",{attrs:{name:"new_ticket_interval",classname:"col-sm-6",elements:e.elements_new_ticket,multiple:!1,prePopulate:!1,label:e.lang("new_ticket_interval"),value:e.new_ticket_interval,onChange:e.onChange,searchable:!1,clearable:!1}})],1),e._v(" "),a("div",{staticClass:"row"},[a("dynamic-select",{attrs:{name:"is_image_inline",classname:"col-sm-6",elements:e.elements_is_image_inline,multiple:!1,prePopulate:!1,label:e.lang("is_image_inline"),value:e.is_image_inline,onChange:e.onChange,searchable:!1,clearable:!1}}),e._v(" "),a("text-field",{attrs:{label:e.lang("approved_template_for_whatsapp"),onChange:e.onChange,value:e.template,type:"textarea",name:"template",classname:"col-sm-6",hint:e.lang("approved_template_hint"),id:"template",disabled:!0}})],1)]),e._v(" "),a("div",{staticClass:"card-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.submit}},[a("i",{staticClass:"fas fa-save"}),e._v(" \n                "+e._s(e.app_exists?e.lang("upd8"):e.lang("save"))+"\n            ")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{disabled:!e.app_exists},on:{click:e.toggleModal}},[a("i",{staticClass:"glyphicon glyphicon-repeat"}),e._v(" \n                "+e._s(e.lang("reset"))+"\n            ")])])]),e._v(" "),a("transition",{attrs:{name:"modal"}},[e.showModal?a("modal",{attrs:{showModal:!0,onClose:function(){return e.showModal=!1},containerStyle:"width: 500px"}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("h4",{staticClass:"modal-title"},[e._v(e._s(e.lang("reset")))])]),e._v(" "),e.isLoading?e._e():a("div",{attrs:{slot:"fields"},slot:"fields"},[a("span",[e._v("\n                    "+e._s(e.lang("reset_confirm"))+"\n                  ")])]),e._v(" "),e.isLoading?a("div",{staticClass:"row",attrs:{slot:"fields"},slot:"fields"},[a("loader",{class:{spin:"ar"==e.lang_locale},attrs:{"animation-duration":4e3,color:"#1d78ff",size:e.size}})],1):e._e(),e._v(" "),a("div",{attrs:{slot:"controls"},slot:"controls"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.onSubmit}},[a("i",{staticClass:"glyphicon glyphicon-repeat",attrs:{"aria-hidden":"true"}}),e._v("\n                   "+e._s(e.lang("reset"))+"\n                ")])])]):e._e()],1)],1)},staticRenderFns:[]}}},[2850]);